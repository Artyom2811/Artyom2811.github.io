<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>SQL</title>
    <link rel="stylesheet" href="/style.css">
    <script src="/script.js" defer></script>
</head>

<body>
<div><a href="../Databases.html" class="backButton"></a></div>
<div class="bodyStyle">
    <h1>SQL</h1>

    <div class="todo">
        <h2>Проработать</h2>
        <ol>
            <li><a href="https://www.youtube.com/watch?v=rz6R9r-3V74">Внешний ключ и виды связей</a></li>
            <li><a href="http://www.yaklass.ru/materiali?chtid=511&mode=cht">Реляционная база данных и ее особенности.</a></li>
            <li><a href="https://habr.com/ru/company/otus/blog/461067/">Топ-65 вопросов по SQL</a></li>
            <li><a href="http://www.skillz.ru/dev/php/article-Obyasnenie_SQL_obedinenii_JOIN_INNER_OUTER.html">Объяснение SQL объединений JOIN: LEFT/RIGHT/INNER/OUTER</a></li>
        </ol>
    </div>

    <h2>Основные разделы</h2>
    <ul>
        <p>Общее</p>
        <li><a href="link_types/LinkTypes.html">Link Types</a></li>
        <li><a href="transactionLevels/TransactionLevels.html">TransactionLevels</a></li>
        <li><a href="normalization/Normalization.html">Нормализация</a></li>
        <p>Базы данных</p>
        <li><a href="my_sql/MySql.html">MySql</a></li>
        <li><a href="postgreSql/Postgre.html">Postgre</a></li>
        <li><a href="h2/H2.html">H2</a></li>
        <li><a href="sybase/Sybase.html">Sybase</a></li>
    </ul>

    <section>
        <h2>Основные понятия</h2>
        <h3>Дамп</h3>
        <p>Дамп(Dump) - файл, включающий в себя содержимое памяти базы данных.</p>
        <p>Используется для</p>
        <ol>
            <li>Перенос данных на другой хостинг.</li>
            <li>Резервное копирование.</li>
        </ol>
    </section>

    <h2>Виды запросов</h2>
    <h3>DDL(Data Definition Language) - </h3>
    <ul>
        <li>CREATE</li>
        <li>DROP</li>
        <li>ALTER</li>
        <li>TRUNCATE</li>
        <li>COMMENT</li>
        <li>RENAME</li>
    </ul>
    <h3>DQL(Data Query Language) - </h3>
    <ul>
        <li>SELECT</li>
        <pre>SELECT * FROM table1;</pre>
    </ul>
    <h3>DML(Data Manipulation Language) - </h3>
    <ul>
        <li>INSERT</li>
        <pre>
INSERT INTO table2 (user_id, phone_number) VALUE ('2','200');
        </pre>
        <li>UPDATE</li>
        <pre>
UPDATE table2 SET user_id='2', phone_number='200' WHERE phone_id='1';
        </pre>
        <li>DELETE</li>
        <li>LOCK</li>
        <li>CALL</li>
        <li>EXPLAIN PLAN</li>
    </ul>
    <h3>DCL(Data Control Language) - </h3>
    <ul>
        <li>GRANT</li>
        <li>REVOKE</li>
    </ul>
    <h3>TCL(Transaction Control Language) - </h3>
    <ul>
        <li>COMMIT</li>
        <li>ROLLBACK</li>
        <li>SAVEPOINT</li>
        <li>SET TRANSACTION</li>
    </ul>

    <h2>Команды</h2>
    <ol>
        <li>WHERE - ограничивающее команда для SELECT, UPDATE, DELETE. Оно выполняется до того, как будет получен
            результат операции.
        </li>
        <li>HAVING - фильтрующее выражение. Работает в командой GROUP BY.</li>
        <li>Виды Joins:
            <ul>
                <li>INNER JOIN - общее</li>
                <li>LEFT JOIN - левое и общее</li>
                <li>RIGHT JOIN - правое и общее</li>
                <li>RIGHT JOIN - правое и общее</li>
                <li>OUTER - не общее</li>
                <li>CROSS(декартова произведения) - не общее</li>
            </ul>
        </li>
    </ol>

    <h2>Оптимизация запросов</h2>
    <ol>
        <li>Проверить план запроса</li>
        <li>Можно отключить планировщик запросов</li>
        <li>Использовать индексы</li>
        <li>Скрипт должен идти по мере увеличения размера таблиц.</li>
        <pre>
Select *
From A a --100 Сткок
INNER JOIN B b ON a.c = b.c --1000Сткок
INNER JOIN C c ON b.d = c.d --10000 Сткок
        </pre>
        <li>Фильтровать как можно раньше для уменьшения размеров обрабатываемых данных.</li>
    </ol>

    <h2>СРАВНЕНИЕ ВЫБОРКИ С ИНДЕКСОМ И БЕЗ</h2>
    <pre>
        вариант с:
        SELECT * FROM table WHERE ...
        вариант без:
        SELECT * FROM table WITH (INDEX(0)) WHERE …
    </pre>

    <h2>SQL-инъекции</h2>
    <p>SQL-инъекция — это попытка изменить запрос к базе данных. Ввести ее можно через форму или ссылку, которая
        передает параметры методом GET.
    </p>
    <h3>Как защититься</h3>
    <p>В JAVA нужно использовать "PreparedStatement" </p>

    <h2>Вопросы на собеседование</h2>
    <p>DELETE vs TRUNCATE:</p>
    <ul>
        <li>TRUNCATE не может использовать WHERE.</li>
        <li>TRUNCATE быстрее и использует меньше системных ресурсов и практически не пишет лог транзакции.</li>
        <li>TRUNCATE - после использования, откат (rollback) невозможен.</li>
        <li>TRUNCATE обнуляет счетчик, уникальности новых записей.</li>
    </ul>
</div>
</body>
<script>setBackButtonHeight();</script>
</html>